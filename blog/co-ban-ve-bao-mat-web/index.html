<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Cơ bản về bảo mật Web | HuyDQ's Blog</title><meta name=keywords content="Security"><meta name=description content="Có rất nhiều lý do để học về bảo mật web như:
 Bạn lo lắng về việc để lộ thông tin cá nhân trên mạng. Bạn quan tâm đến tính bảo mật cho website hoặc ứng dụng của mình. Bạn là lập trình viên và đang đi xin việc, bạn muốn chuẩn bị sẵn cho trường hợp nhà tuyển dụng hỏi về các vấn đề bảo mật web.  &mldr; và nhiều lý do khác nữa."><meta name=author content><link rel=canonical href=https://huydq.dev/blog/co-ban-ve-bao-mat-web/><link crossorigin=anonymous href=/assets/css/stylesheet.0cc67acd22146733bad9e509decee830163972ec8f8f0baf604dc35feeade5ad.css integrity="sha256-DMZ6zSIUZzO62eUJ3s7oMBY5cuyPjwuvYE3DX+6t5a0=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://huydq.dev/icons/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://huydq.dev/icons/favicon16.png><link rel=icon type=image/png sizes=32x32 href=https://huydq.dev/icons/favicon32.png><link rel=apple-touch-icon href=https://huydq.dev/icons/favicon.png><link rel=mask-icon href=https://huydq.dev/icons/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-5KF148C0X6"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5KF148C0X6",{anonymize_ip:!1})}</script><meta property="og:title" content="Cơ bản về bảo mật Web"><meta property="og:description" content="Có rất nhiều lý do để học về bảo mật web như:
 Bạn lo lắng về việc để lộ thông tin cá nhân trên mạng. Bạn quan tâm đến tính bảo mật cho website hoặc ứng dụng của mình. Bạn là lập trình viên và đang đi xin việc, bạn muốn chuẩn bị sẵn cho trường hợp nhà tuyển dụng hỏi về các vấn đề bảo mật web.  &mldr; và nhiều lý do khác nữa."><meta property="og:type" content="article"><meta property="og:url" content="https://huydq.dev/blog/co-ban-ve-bao-mat-web/"><meta property="og:image" content="https://huydq.dev/icons/thumbnail.jpg"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-05-09T00:00:00+00:00"><meta property="article:modified_time" content="2019-05-09T00:00:00+00:00"><meta property="og:site_name" content="HuyDQ's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://huydq.dev/icons/thumbnail.jpg"><meta name=twitter:title content="Cơ bản về bảo mật Web"><meta name=twitter:description content="Có rất nhiều lý do để học về bảo mật web như:
 Bạn lo lắng về việc để lộ thông tin cá nhân trên mạng. Bạn quan tâm đến tính bảo mật cho website hoặc ứng dụng của mình. Bạn là lập trình viên và đang đi xin việc, bạn muốn chuẩn bị sẵn cho trường hợp nhà tuyển dụng hỏi về các vấn đề bảo mật web.  &mldr; và nhiều lý do khác nữa."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Cơ bản về bảo mật Web","item":"https://huydq.dev/blog/co-ban-ve-bao-mat-web/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Cơ bản về bảo mật Web","name":"Cơ bản về bảo mật Web","description":"Có rất nhiều lý do để học về bảo mật web như:\n Bạn lo lắng về việc để lộ thông tin cá nhân trên mạng. Bạn quan tâm đến tính bảo mật cho website hoặc ứng dụng của mình. Bạn là lập trình viên và đang đi xin việc, bạn muốn chuẩn bị sẵn cho trường hợp nhà tuyển dụng hỏi về các vấn đề bảo mật web.  \u0026hellip; và nhiều lý do khác nữa.","keywords":["Security"],"articleBody":" Có rất nhiều lý do để học về bảo mật web như:\n Bạn lo lắng về việc để lộ thông tin cá nhân trên mạng. Bạn quan tâm đến tính bảo mật cho website hoặc ứng dụng của mình. Bạn là lập trình viên và đang đi xin việc, bạn muốn chuẩn bị sẵn cho trường hợp nhà tuyển dụng hỏi về các vấn đề bảo mật web.  … và nhiều lý do khác nữa.\nBài viết này sẽ giải thích một vài vấn đề bảo mật web thông dụng kèm theo thuật ngữ chuyên ngành của nó.\n Hai khái niệm cốt lõi trong bảo mật   Không một ai có thể an toàn 100%.\n  Một lớp bảo vệ là không đủ.\n  Cross-Origin Resource Sharing (CORS) Bạn đã bao giờ gặp một thông báo lỗi dạng như này chưa?\nNo 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'null' is therefore not allowed access. Nếu đã gặp phải lỗi này, bạn sẽ thử tìm giải pháp trên Google. Và bạn sẽ thấy ai đó hướng dẫn cài 1 extension giúp cho lỗi này biến mất và trang web của bạn lại hoạt động bình thường.\nNhưng liệu đây có phải cách làm tốt?\nCORS được sinh ra là để bảo vệ bạn chứ không phải để gây khó khăn cho bạn Trước khi giải thích về CORS, chúng ta hãy cùng tìm hiểu lại về Cookies, đặc biệt là Authentication Cookies. Authentication Cookies được sử dụng để thông báo cho server biết rằng bạn đã đăng nhập vào hệ thống, và chúng được tự động gửi kèm mỗi request lên server.\nGiả sử bạn đã đăng nhập vào Facebook, và họ sử dụng Authentication Cookies.\nSau đó bạn click vào 1 link bất kỳ trên mạng, ví dụ link video full 9 phút và nó sẽ redirect bạn về 1 website nào đó của hacker. Website này sẽ tự động chạy 1 đoạn code Javascript để thực hiện request lên facebook.com có kèm theo authentication cookie của bạn!\nTrong một thế giới không có CORS, hacker có thể thực hiện các thao tác trên Facebook với tài khoản của bạn mà bạn không hề hay biết. Ví dụ như đăng tin lên trên dòng thời gian của bạn kèm theo link video full 9 phút, sau đó bạn bè của bạn click vào link trên và cũng thực hiện hành vi tương tự, … Vòng lặp này cứ tiếp diễn cho đến khi toàn bộ mạng xã hội facebook đều thấy xuất hiện link video full 9 phút 😆\nThực tế, với sự bảo vệ của CORS, Facebook sẽ chỉ cho phép những request với Origin (đính kèm trong request header) là facebook.com lên server của họ. Tức là chỉ có request thực hiện từ website facebook.com mới được chấp nhận. Hay nói cách khác, họ đã giới hạn việc chia sẻ tài nguyên giữa các tên miền khác nhau (cross-origin resource sharing).\nBạn cũng có thể tự hỏi:\n- “Vậy nếu website của hacker cố tình thay đổi header origin khi gửi request thì sao?”. Đúng, họ có thể làm như vậy. Nhưng trình duyệt sẽ tự động bỏ qua và chỉ gửi lên origin thực sự (là tên miền của website thực hiện request).\n- “Vậy nếu request được thực hiện từ phía server chứ không phải client?”. Trong trường hợp này hacker có thể vượt qua được CORS nhưng họ lại không thể gửi kèm được authentication cookie bởi vì nó nằm ở phía client.\nContent Security Policy (CSP) Để hiểu về CSP (chính sách bảo mật nội dung), trước tiên chúng ta cần tìm hiểu về một lỗ hổng rất thông dụng trên web, đó là XSS ( cross- s ite s cripting, ký hiệu X thay cho C để tránh nhầm lẫn với CSS 😀). XSS là khi kẻ xấu nhúng code Javascript vào trong code phía client của bạn.\nBạn có thể nghĩ rằng: “Nhúng code Javascript vào thì làm được gì? Thay đổi màu chữ từ đỏ sang xanh? …”\nGiả sử một ai đó nhúng được code Javascript vào website mà bạn đang truy cập. Khi đó họ có thể:\n Giả dạng bạn để thực hiện một HTTP request. Nhúng 1 iframe trông như 1 phần website và yêu cầu bạn nhập mật khẩu rồi gửi request đến server của hacker. Chèn hoặc sửa một đường dẫn trên website gốc, dẫn đến một website giả mạo với giao diện giống hệt website gốc để thực hiện hành vi lừa đảo (ví dụ yêu cầu đăng nhập, yêu cầu nhập thông tin tài khoản, …)  … và muôn vàn khả năng khác.\nCSP sẽ cố gắng ngăn chặn điều này ngay từ đầu bằng cách giới hạn:\n Cái gì có thể được phép mở trong một iframe. Style nào có thể được tải. Request có thể được thực hiện ở đâu. …  Vậy nó hoạt động như nào? Khi bạn bấm vào một đường link hoặc gõ địa chỉ website trên trình duyệt thì trình duyệt sẽ thực hiện một GET request. Và server sẽ trả về HTML kèm theo một vài HTTP headers. Nếu bạn muốn biết mình nhận được header như nào thì hãy bật tab Network trong DevTools và truy cập thử một website. Bạn có thể sẽ thấy một response header như sau:\ncontent-security-policy: default-src * data: blob:; script-src *.facebook.com *.fbcdn.net *.facebook.net *.google-analytics.com *.virtualearth.net *.google.com 127.0.0.1:* *.spotilocal.com:* 'unsafe-inline' 'unsafe-eval' *.atlassolutions.com blob: data: 'self'; style-src data: blob: 'unsafe-inline' *; connect-src *.facebook.com facebook.com *.fbcdn.net *.facebook.net *.spotilocal.com:* wss://*.facebook.com:* https://fb.scanandcleanlocal.com:* *.atlassolutions.com attachment.fbsbx.com ws://localhost:* blob: *.cdninstagram.com 'self' chrome-extension://boadgeojelhgndaghljhdicfkmllpafd chrome-extension://dliochdbjfkdbacpmhlcpmleaejidimm; Đó là chính sách bảo mật nội dung của Facebook. Tìm hiểu chi tiết hơn các directives (chỉ thị):\n  default-src: Hạn chế tất cả các CSP directive mà không được liệt kê rõ ràng.\n  script-src: Giới hạn những script có thể được load.\n  style-src: Giới hạn những style có thể được load.\n  connect-src: Giới hạn những URL nào có thể được load sử dụng script như fetch, XHR, ajax, …\n  Có nhiều CSP directive khác nữa ngoài 4 cái ở trên. Trình duyệt sẽ đọc CSP header và áp dụng toàn bộ những directive đó cho mọi thứ trên trang HTML.\nHTTPS hay HTTP Secure Chắc chắn bạn đã từng nghe nói đến HTTPS. Có thể bạn nghe nói rằng Chrome sẽ đánh dấu trang web của bạn là không an toàn (insecure) nếu nó không có HTTPS.\nVề bản chất thì HTTPS khá đơn giản. HTTPS thì được mã hóa còn HTTP thì không.\nVậy cái này thì có liên quan gì nếu như bạn không gửi những dữ liệu nhạy cảm? Hãy cùng tìm hiểu thêm về một thuật ngữ khác: MITM ( M an i n t he M iddle).\nNếu bạn đang sử dụng Wi-Fi công cộng (không đặt mật khẩu) ở một quán cà phê, một ai đó có thể dễ dàng bắt được request của bạn. Nếu dữ liệu của bạn không được mã hóa, họ có thể đọc được làm bất cứ thứ gì họ muốn. Họ có thể chỉnh sửa HTML, CSS hoặc Javascript trước khi trình duyệt của bạn nhận được dữ liệu. Tương tự như XSS ở trên, bạn có thể hình dung được hacker có thể làm được những gì.\nSử dụng HTTPS thì mọi dữ liệu truyền và nhận giữa máy tính của bạn và server đều được mã hóa khiến cho hacker không thể đọc hay chỉnh sửa tùy ý được.\nHTTP Strict-Transport-Security (HSTS) Tiếp tục sử dụng Facebook header làm ví dụ:\nstrict-transport-security: max-age=15552000; preload Header trên chỉ áp dụng nếu bạn truy cập trang sử dụng HTTPS:\n max-age: Chỉ định thời gian trình duyệt ghi nhớ để bắt buộc người dùng truy cập website bằng HTTPS. preload: Không quan trọng lắm với mục đích của chúng ta, nó là một dịch vụ được host bởi Google.  Giả sử bạn truy cập trang Facebook lần đầu tiên và bạn biết HTTPS an toàn hơn HTTP nên bạn truy cập qua HTTPS. Khi trình duyệt nhận được header trên nó sẽ ghi nhớ chuyển hướng những request sau này của bạn về HTTPS. Một tháng sau có ai đó gửi cho bạn một link đến Facebook sử dụng HTTP và bạn bấm vào nó. Do 1 tháng thì nhỏ hơn 15552000 giây (giá trị của max-age) nên trình duyệt sẽ gửi request dưới dạng HTTPS để tránh tấn công MITM.\nTổng kết Bảo mật web rất quan trọng bất kể bạn làm ở vị trí nào trong mảng phát triển web. Bạn càng tiếp xúc, càng tìm hiểu nó kỹ hơn thì bạn càng có lợi.\nBảo mật nên là thứ quan trọng với tất cả mọi người chứ không chỉ riêng những chuyên gia bảo mật 👮.\nNguồn: https://medium.freecodecamp.org/a-quick-introduction-to-web-security-f90beaf4dd41\n","wordCount":"1468","inLanguage":"en","datePublished":"2019-05-09T00:00:00Z","dateModified":"2019-05-09T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://huydq.dev/blog/co-ban-ve-bao-mat-web/"},"publisher":{"@type":"Organization","name":"HuyDQ's Blog","logo":{"@type":"ImageObject","url":"https://huydq.dev/icons/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://huydq.dev/ accesskey=h title="huydq.dev (Alt + H)">huydq.dev</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://huydq.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://huydq.dev/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://huydq.dev/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://huydq.dev/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Cơ bản về bảo mật Web</h1><div class=post-meta><span title="2019-05-09 00:00:00 +0000 UTC">09/05/2019</span>&nbsp;·&nbsp;7 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#hai-khái-niệm-cốt-lõi-trong-bảo-mật>Hai khái niệm cốt lõi trong bảo mật</a></li><li><a href=#cross-origin-resource-sharing-cors>Cross-Origin Resource Sharing (CORS)</a><ul><li><a href=#cors-được-sinh-ra-là-để-bảo-vệ-bạn-chứ-không-phải-để-gây-khó-khăn-cho-bạn>CORS được sinh ra là để bảo vệ bạn chứ không phải để gây khó khăn cho bạn</a></li></ul></li><li><a href=#content-security-policy-csp>Content Security Policy (CSP)</a><ul><li><a href=#vậy-nó-hoạt-động-như-nào>Vậy nó hoạt động như nào?</a></li></ul></li><li><a href=#https-hay-http-secure>HTTPS hay HTTP Secure</a></li><li><a href=#http-strict-transport-security-hsts>HTTP Strict-Transport-Security (HSTS)</a></li><li><a href=#tổng-kết>Tổng kết</a></li></ul></nav></div></details></div><div class=post-content><blockquote><p>Có rất nhiều lý do để học về bảo mật web như:</p><ul><li>Bạn lo lắng về việc để lộ thông tin cá nhân trên mạng.</li><li>Bạn quan tâm đến tính bảo mật cho website hoặc ứng dụng của mình.</li><li>Bạn là lập trình viên và đang đi xin việc, bạn muốn chuẩn bị sẵn cho trường hợp nhà tuyển dụng hỏi về các vấn đề bảo mật web.</li></ul><p>&mldr; và nhiều lý do khác nữa.</p><p>Bài viết này sẽ giải thích một vài vấn đề bảo mật web thông dụng kèm theo thuật ngữ chuyên ngành của nó.</p></blockquote><h2 id=hai-khái-niệm-cốt-lõi-trong-bảo-mật>Hai khái niệm cốt lõi trong bảo mật<a hidden class=anchor aria-hidden=true href=#hai-khái-niệm-cốt-lõi-trong-bảo-mật>#</a></h2><ol><li><p>Không một ai có thể an toàn 100%.</p></li><li><p>Một lớp bảo vệ là không đủ.</p></li></ol><h2 id=cross-origin-resource-sharing-cors>Cross-Origin Resource Sharing (CORS)<a hidden class=anchor aria-hidden=true href=#cross-origin-resource-sharing-cors>#</a></h2><p>Bạn đã bao giờ gặp một thông báo lỗi dạng như này chưa?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.
</span></span><span style=display:flex><span>Origin &#39;null&#39; is therefore not allowed access.
</span></span></code></pre></div><p>Nếu đã gặp phải lỗi này, bạn sẽ thử tìm giải pháp trên Google. Và bạn sẽ thấy ai đó hướng dẫn cài 1 extension giúp cho lỗi này biến mất và trang web của bạn lại hoạt động bình thường.</p><p>Nhưng liệu đây có phải cách làm tốt?</p><p><img loading=lazy src=https://media.giphy.com/media/6gLyE15StAs3C/giphy.gif alt=No></p><h3 id=cors-được-sinh-ra-là-để-bảo-vệ-bạn-chứ-không-phải-để-gây-khó-khăn-cho-bạn>CORS được sinh ra là để bảo vệ bạn chứ không phải để gây khó khăn cho bạn<a hidden class=anchor aria-hidden=true href=#cors-được-sinh-ra-là-để-bảo-vệ-bạn-chứ-không-phải-để-gây-khó-khăn-cho-bạn>#</a></h3><p>Trước khi giải thích về <strong>CORS</strong>, chúng ta hãy cùng tìm hiểu lại về Cookies, đặc biệt là Authentication Cookies. Authentication Cookies được sử dụng để thông báo cho server biết rằng bạn đã đăng nhập vào hệ thống, và chúng được tự động gửi kèm mỗi request lên server.</p><p>Giả sử bạn đã đăng nhập vào Facebook, và họ sử dụng Authentication Cookies.</p><p>Sau đó bạn click vào 1 link bất kỳ trên mạng, ví dụ <a href=https://huydq.dev/>link video full 9 phút</a> và nó sẽ redirect bạn về 1 website nào đó của hacker. Website này sẽ tự động chạy 1 đoạn code Javascript để thực hiện request lên <a href=https://facebook.com>facebook.com</a> có kèm theo authentication cookie của bạn!</p><p>Trong một thế giới không có CORS, hacker có thể thực hiện các thao tác trên Facebook với tài khoản của bạn mà bạn không hề hay biết. Ví dụ như đăng tin lên trên dòng thời gian của bạn kèm theo <a href=https://huydq.dev/>link video full 9 phút</a>, sau đó bạn bè của bạn click vào link trên và cũng thực hiện hành vi tương tự, &mldr; Vòng lặp này cứ tiếp diễn cho đến khi toàn bộ mạng xã hội facebook đều thấy xuất hiện <a href=https://huydq.dev/>link video full 9 phút</a> 😆</p><p>Thực tế, với sự bảo vệ của CORS, Facebook sẽ chỉ cho phép những request với Origin (đính kèm trong request header) là facebook.com lên server của họ. Tức là chỉ có request thực hiện từ website facebook.com mới được chấp nhận. Hay nói cách khác, họ đã giới hạn việc chia sẻ tài nguyên giữa các tên miền khác nhau (cross-origin resource sharing).</p><p><strong>Bạn cũng có thể tự hỏi:</strong></p><p><em>- &ldquo;Vậy nếu website của hacker cố tình thay đổi header origin khi gửi request thì sao?&rdquo;</em>. Đúng, họ có thể làm như vậy. Nhưng trình duyệt sẽ tự động bỏ qua và chỉ gửi lên origin thực sự (là tên miền của website thực hiện request).</p><p><em>- &ldquo;Vậy nếu request được thực hiện từ phía server chứ không phải client?&rdquo;</em>. Trong trường hợp này hacker có thể vượt qua được CORS nhưng họ lại không thể gửi kèm được authentication cookie bởi vì nó nằm ở phía client.</p><h2 id=content-security-policy-csp>Content Security Policy (CSP)<a hidden class=anchor aria-hidden=true href=#content-security-policy-csp>#</a></h2><p>Để hiểu về <strong>CSP</strong> (chính sách bảo mật nội dung), trước tiên chúng ta cần tìm hiểu về một lỗ hổng rất thông dụng trên web, đó là <strong>XSS</strong> ( <strong>cross</strong>- <strong>s</strong> ite <strong>s</strong> cripting, ký hiệu X thay cho C để tránh nhầm lẫn với CSS <a href=https://emojipedia.org/grinning-face/>😀</a>). XSS là khi kẻ xấu nhúng code Javascript vào trong code phía client của bạn.</p><p>Bạn có thể nghĩ rằng: <em>&ldquo;Nhúng code Javascript vào thì làm được gì? Thay đổi màu chữ từ đỏ sang xanh? &mldr;&rdquo;</em></p><p>Giả sử một ai đó nhúng được code Javascript vào website mà bạn đang truy cập. Khi đó họ có thể:</p><ul><li>Giả dạng bạn để thực hiện một HTTP request.</li><li>Nhúng 1 iframe trông như 1 phần website và yêu cầu bạn nhập mật khẩu rồi gửi request đến server của hacker.</li><li>Chèn hoặc sửa một đường dẫn trên website gốc, dẫn đến một website giả mạo với giao diện giống hệt website gốc để thực hiện hành vi lừa đảo (ví dụ yêu cầu đăng nhập, yêu cầu nhập thông tin tài khoản, &mldr;)</li></ul><p>&mldr; và muôn vàn khả năng khác.</p><p><img loading=lazy src=https://media.giphy.com/media/3rgXBOmTlzyFCURutG/giphy.gif alt=hacker></p><p><strong>CSP</strong> sẽ cố gắng ngăn chặn điều này ngay từ đầu bằng cách giới hạn:</p><ul><li>Cái gì có thể được phép mở trong một iframe.</li><li>Style nào có thể được tải.</li><li>Request có thể được thực hiện ở đâu.</li><li>&mldr;</li></ul><h3 id=vậy-nó-hoạt-động-như-nào>Vậy nó hoạt động như nào?<a hidden class=anchor aria-hidden=true href=#vậy-nó-hoạt-động-như-nào>#</a></h3><p>Khi bạn bấm vào một đường link hoặc gõ địa chỉ website trên trình duyệt thì trình duyệt sẽ thực hiện một GET request. Và server sẽ trả về HTML kèm theo một vài HTTP headers. Nếu bạn muốn biết mình nhận được header như nào thì hãy bật tab Network trong DevTools và truy cập thử một website. Bạn có thể sẽ thấy một response header như sau:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>content-security-policy: default-src * data: blob:; script-src *.facebook.com
</span></span><span style=display:flex><span>*.fbcdn.net *.facebook.net *.google-analytics.com *.virtualearth.net
</span></span><span style=display:flex><span>*.google.com 127.0.0.1:* *.spotilocal.com:* &#39;unsafe-inline&#39; &#39;unsafe-eval&#39;
</span></span><span style=display:flex><span>*.atlassolutions.com blob: data: &#39;self&#39;; style-src data: blob: &#39;unsafe-inline&#39;
</span></span><span style=display:flex><span>*; connect-src *.facebook.com facebook.com *.fbcdn.net *.facebook.net
</span></span><span style=display:flex><span>*.spotilocal.com:* wss://*.facebook.com:* https://fb.scanandcleanlocal.com:*
</span></span><span style=display:flex><span>*.atlassolutions.com attachment.fbsbx.com ws://localhost:* blob:
</span></span><span style=display:flex><span>*.cdninstagram.com &#39;self&#39; chrome-extension://boadgeojelhgndaghljhdicfkmllpafd
</span></span><span style=display:flex><span>chrome-extension://dliochdbjfkdbacpmhlcpmleaejidimm;
</span></span></code></pre></div><p>Đó là chính sách bảo mật nội dung của Facebook. Tìm hiểu chi tiết hơn các directives (chỉ thị):</p><ul><li><p><strong>default-src</strong>: Hạn chế tất cả các CSP directive mà không được liệt kê rõ ràng.</p></li><li><p><strong>script-src</strong>: Giới hạn những script có thể được load.</p></li><li><p><strong>style-src</strong>: Giới hạn những style có thể được load.</p></li><li><p><strong>connect-src</strong>: Giới hạn những URL nào có thể được load sử dụng script như fetch, XHR, ajax, &mldr;</p></li></ul><p>Có nhiều CSP directive khác nữa ngoài 4 cái ở trên. Trình duyệt sẽ đọc CSP header và áp dụng toàn bộ những directive đó cho mọi thứ trên trang HTML.</p><h2 id=https-hay-http-secure>HTTPS hay HTTP Secure<a hidden class=anchor aria-hidden=true href=#https-hay-http-secure>#</a></h2><p>Chắc chắn bạn đã từng nghe nói đến HTTPS. Có thể bạn nghe nói rằng Chrome sẽ đánh dấu trang web của bạn là không an toàn (insecure) nếu nó không có HTTPS.</p><p>Về bản chất thì HTTPS khá đơn giản. HTTPS thì được mã hóa còn HTTP thì không.</p><p>Vậy cái này thì có liên quan gì nếu như bạn không gửi những dữ liệu nhạy cảm? Hãy cùng tìm hiểu thêm về một thuật ngữ khác: <strong>MITM</strong> ( <strong>M</strong> an <strong>i</strong> n <strong>t</strong> he <strong>M</strong> iddle).</p><p>Nếu bạn đang sử dụng Wi-Fi công cộng (không đặt mật khẩu) ở một quán cà phê, một ai đó có thể dễ dàng bắt được request của bạn. Nếu dữ liệu của bạn không được mã hóa, họ có thể đọc được làm bất cứ thứ gì họ muốn. Họ có thể chỉnh sửa HTML, CSS hoặc Javascript trước khi trình duyệt của bạn nhận được dữ liệu. Tương tự như XSS ở trên, bạn có thể hình dung được hacker có thể làm được những gì.</p><p>Sử dụng HTTPS thì mọi dữ liệu truyền và nhận giữa máy tính của bạn và server đều được mã hóa khiến cho hacker không thể đọc hay chỉnh sửa tùy ý được.</p><h2 id=http-strict-transport-security-hsts>HTTP Strict-Transport-Security (HSTS)<a hidden class=anchor aria-hidden=true href=#http-strict-transport-security-hsts>#</a></h2><p>Tiếp tục sử dụng Facebook header làm ví dụ:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>strict-transport-security: max-age=15552000; preload
</span></span></code></pre></div><p>Header trên chỉ áp dụng nếu bạn truy cập trang sử dụng HTTPS:</p><ul><li>max-age: Chỉ định thời gian trình duyệt ghi nhớ để bắt buộc người dùng truy cập website bằng HTTPS.</li><li>preload: Không quan trọng lắm với mục đích của chúng ta, nó là một dịch vụ được host bởi Google.</li></ul><p>Giả sử bạn truy cập trang Facebook lần đầu tiên và bạn biết HTTPS an toàn hơn HTTP nên bạn truy cập qua HTTPS. Khi trình duyệt nhận được header trên nó sẽ ghi nhớ chuyển hướng những request sau này của bạn về HTTPS. Một tháng sau có ai đó gửi cho bạn một link đến Facebook sử dụng HTTP và bạn bấm vào nó. Do 1 tháng thì nhỏ hơn 15552000 giây (giá trị của max-age) nên trình duyệt sẽ gửi request dưới dạng HTTPS để tránh tấn công MITM.</p><h2 id=tổng-kết>Tổng kết<a hidden class=anchor aria-hidden=true href=#tổng-kết>#</a></h2><p>Bảo mật web rất quan trọng bất kể bạn làm ở vị trí nào trong mảng phát triển web. Bạn càng tiếp xúc, càng tìm hiểu nó kỹ hơn thì bạn càng có lợi.</p><p>Bảo mật nên là thứ quan trọng với tất cả mọi người chứ không chỉ riêng những chuyên gia bảo mật 👮.</p><p><img loading=lazy src=https://media.giphy.com/media/81xwEHX23zhvy/giphy.gif alt=security></p><p><em>Nguồn: <a href=https://medium.freecodecamp.org/a-quick-introduction-to-web-security-f90beaf4dd41>https://medium.freecodecamp.org/a-quick-introduction-to-web-security-f90beaf4dd41</a></em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://huydq.dev/tags/security/>Security</a></li></ul><nav class=paginav><a class=prev href=https://huydq.dev/blog/tao-website-wordpress-mien-phi-tren-heroku/><span class=title>« Prev</span><br><span>Tạo website WordPress miễn phí trên Heroku</span></a>
<a class=next href=https://huydq.dev/blog/quan-ly-dependencies-trong-go-bang-govendor/><span class=title>Next »</span><br><span>Quản lý Dependencies trong Go bằng Govendor</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Cơ bản về bảo mật Web on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fhuydq.dev%2fblog%2fco-ban-ve-bao-mat-web%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Cơ bản về bảo mật Web on twitter" href="https://twitter.com/intent/tweet/?text=C%c6%a1%20b%e1%ba%a3n%20v%e1%bb%81%20b%e1%ba%a3o%20m%e1%ba%adt%20Web&url=https%3a%2f%2fhuydq.dev%2fblog%2fco-ban-ve-bao-mat-web%2f&hashtags=Security"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a></div></footer><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//huydq-dev.disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2022 HuyDQ's Blog</span>
<span>&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;</span><div class=social-icons><a href=https://github.com/robinhuy><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://codepen.io/robinhuy><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/><line x1="12" y1="22" x2="12" y2="15.5"/><polyline points="22 8.5 12 15.5 2 8.5"/><polyline points="2 15.5 12 8.5 22 15.5"/><line x1="12" y1="2" x2="12" y2="8.5"/></svg></a><a href=https://stackoverflow.com/users/5229299/robin-huy><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.913 16.041v6.848h17.599v-6.848M7.16 18.696h8.925M7.65 13.937l8.675 1.8M9.214 9.124l8.058 3.758M12.086 4.65l6.849 5.66M15.774 1.111l5.313 7.162"/></svg></a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>