<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>T·ªëi ∆∞u static website v·ªõi Webpack | HuyDQ's Blog</title><meta name=keywords content="Webpack"><meta name=description content="N·∫øu b·∫°n l√† m·ªôt Web Frontend Developer th√¨ ch·∫Øc s·∫Ω kh√¥ng xa l·∫° g√¨ v·ªõi Webpack, m·ªôt c√¥ng c·ª• bundle code m·∫°nh m·∫Ω. Webpack th∆∞·ªùng ƒë∆∞·ª£c t√≠ch h·ª£p s·∫µn trong c√°c th∆∞ vi·ªán nh∆∞ React, Angular, Vue, ‚Ä¶ v√† c√≥ nhi·ªÅu ng∆∞·ªùi th·∫≠m ch√≠ c√≤n kh√¥ng bi·∫øt ƒë·∫øn s·ª± t·ªìn t·∫°i c≈©ng nh∆∞ t√°c d·ª•ng c·ªßa n√≥ üòÖ
B√†i vi·∫øt n√†y m√¨nh s·∫Ω h∆∞·ªõng d·∫´n c√°c b·∫°n c√°ch t·ªëi ∆∞u m·ªôt static website (web tƒ©nh ch·ªâ g·ªìm HTML CSS JS) b·∫±ng Webpack."><meta name=author content><link rel=canonical href=https://huydq.dev/blog/toi-uu-static-page-voi-webpack/><link crossorigin=anonymous href=/assets/css/stylesheet.1d3f823d124f9f3fcec0f227cc1b59954e72f08f59907ec81d076933582a33d1.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://huydq.dev/icons/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://huydq.dev/icons/favicon16.png><link rel=icon type=image/png sizes=32x32 href=https://huydq.dev/icons/favicon32.png><link rel=apple-touch-icon href=https://huydq.dev/icons/favicon.png><link rel=mask-icon href=https://huydq.dev/icons/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-5KF148C0X6"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5KF148C0X6",{anonymize_ip:!1})}</script><meta property="og:title" content="T·ªëi ∆∞u static website v·ªõi Webpack"><meta property="og:description" content="N·∫øu b·∫°n l√† m·ªôt Web Frontend Developer th√¨ ch·∫Øc s·∫Ω kh√¥ng xa l·∫° g√¨ v·ªõi Webpack, m·ªôt c√¥ng c·ª• bundle code m·∫°nh m·∫Ω. Webpack th∆∞·ªùng ƒë∆∞·ª£c t√≠ch h·ª£p s·∫µn trong c√°c th∆∞ vi·ªán nh∆∞ React, Angular, Vue, ‚Ä¶ v√† c√≥ nhi·ªÅu ng∆∞·ªùi th·∫≠m ch√≠ c√≤n kh√¥ng bi·∫øt ƒë·∫øn s·ª± t·ªìn t·∫°i c≈©ng nh∆∞ t√°c d·ª•ng c·ªßa n√≥ üòÖ
B√†i vi·∫øt n√†y m√¨nh s·∫Ω h∆∞·ªõng d·∫´n c√°c b·∫°n c√°ch t·ªëi ∆∞u m·ªôt static website (web tƒ©nh ch·ªâ g·ªìm HTML CSS JS) b·∫±ng Webpack."><meta property="og:type" content="article"><meta property="og:url" content="https://huydq.dev/blog/toi-uu-static-page-voi-webpack/"><meta property="og:image" content="https://huydq.dev/icons/thumbnail.jpg"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-06-19T00:00:00+00:00"><meta property="article:modified_time" content="2021-06-19T00:00:00+00:00"><meta property="og:site_name" content="HuyDQ's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://huydq.dev/icons/thumbnail.jpg"><meta name=twitter:title content="T·ªëi ∆∞u static website v·ªõi Webpack"><meta name=twitter:description content="N·∫øu b·∫°n l√† m·ªôt Web Frontend Developer th√¨ ch·∫Øc s·∫Ω kh√¥ng xa l·∫° g√¨ v·ªõi Webpack, m·ªôt c√¥ng c·ª• bundle code m·∫°nh m·∫Ω. Webpack th∆∞·ªùng ƒë∆∞·ª£c t√≠ch h·ª£p s·∫µn trong c√°c th∆∞ vi·ªán nh∆∞ React, Angular, Vue, ‚Ä¶ v√† c√≥ nhi·ªÅu ng∆∞·ªùi th·∫≠m ch√≠ c√≤n kh√¥ng bi·∫øt ƒë·∫øn s·ª± t·ªìn t·∫°i c≈©ng nh∆∞ t√°c d·ª•ng c·ªßa n√≥ üòÖ
B√†i vi·∫øt n√†y m√¨nh s·∫Ω h∆∞·ªõng d·∫´n c√°c b·∫°n c√°ch t·ªëi ∆∞u m·ªôt static website (web tƒ©nh ch·ªâ g·ªìm HTML CSS JS) b·∫±ng Webpack."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"T·ªëi ∆∞u static website v·ªõi Webpack","item":"https://huydq.dev/blog/toi-uu-static-page-voi-webpack/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"T·ªëi ∆∞u static website v·ªõi Webpack","name":"T·ªëi ∆∞u static website v·ªõi Webpack","description":"N·∫øu b·∫°n l√† m·ªôt Web Frontend Developer th√¨ ch·∫Øc s·∫Ω kh√¥ng xa l·∫° g√¨ v·ªõi Webpack, m·ªôt c√¥ng c·ª• bundle code m·∫°nh m·∫Ω. Webpack th∆∞·ªùng ƒë∆∞·ª£c t√≠ch h·ª£p s·∫µn trong c√°c th∆∞ vi·ªán nh∆∞ React, Angular, Vue, ‚Ä¶ v√† c√≥ nhi·ªÅu ng∆∞·ªùi th·∫≠m ch√≠ c√≤n kh√¥ng bi·∫øt ƒë·∫øn s·ª± t·ªìn t·∫°i c≈©ng nh∆∞ t√°c d·ª•ng c·ªßa n√≥ üòÖ\nB√†i vi·∫øt n√†y m√¨nh s·∫Ω h∆∞·ªõng d·∫´n c√°c b·∫°n c√°ch t·ªëi ∆∞u m·ªôt static website (web tƒ©nh ch·ªâ g·ªìm HTML CSS JS) b·∫±ng Webpack.","keywords":["Webpack"],"articleBody":"N·∫øu b·∫°n l√† m·ªôt Web Frontend Developer th√¨ ch·∫Øc s·∫Ω kh√¥ng xa l·∫° g√¨ v·ªõi Webpack, m·ªôt c√¥ng c·ª• bundle code m·∫°nh m·∫Ω. Webpack th∆∞·ªùng ƒë∆∞·ª£c t√≠ch h·ª£p s·∫µn trong c√°c th∆∞ vi·ªán nh∆∞ React, Angular, Vue, ‚Ä¶ v√† c√≥ nhi·ªÅu ng∆∞·ªùi th·∫≠m ch√≠ c√≤n kh√¥ng bi·∫øt ƒë·∫øn s·ª± t·ªìn t·∫°i c≈©ng nh∆∞ t√°c d·ª•ng c·ªßa n√≥ üòÖ\nB√†i vi·∫øt n√†y m√¨nh s·∫Ω h∆∞·ªõng d·∫´n c√°c b·∫°n c√°ch t·ªëi ∆∞u m·ªôt static website (web tƒ©nh ch·ªâ g·ªìm HTML CSS JS) b·∫±ng Webpack. Ch√∫ √Ω static web n√†y thu·ªôc d·∫°ng multiple pages ch·ª© kh√¥ng ph·∫£i single page, v√† c√≥ th·ªÉ √°p d·ª•ng cho c√°c website ƒë·ªông c√≥ ki·∫øn tr√∫c d·∫°ng Monolithic (d√πng view template engine ƒë·ªÉ render).\nV√≠ d·ª• c·∫•u tr√∫c th∆∞ m·ª•c m·ªôt static website th∆∞·ªùng c√≥ d·∫°ng nh∆∞ sau:\nSau khi c·∫Øt HTML CSS t·ª´ b·∫£n thi·∫øt k·∫ø xong, tr∆∞·ªõc khi ƒë·∫©y code l√™n production, ch√∫ng ta c·∫ßn th√™m m·ªôt b∆∞·ªõc t·ªëi ∆∞u nh∆∞: Minify (obfuscate) code, n√©n ·∫£nh, ƒë√°nh version file CSS, JS ƒë·ªÉ revalidate cache, ‚Ä¶\nCh√∫ng ta c√≥ th·ªÉ d√πng c√°c tool nh∆∞ Grunt, Gulp, ‚Ä¶ C√≤n trong b√†i n√†y m√¨nh s·∫Ω d√πng Webpack v·ªõi nh·ªØng t√≠nh nƒÉng ∆∞u vi·ªát h∆°n, gi√∫p l·∫≠p tr√¨nh vi√™n c√≥ th·ªÉ l∆∞·ªùi h∆°n.\nCode tham kh·∫£o sau khi c·∫•u h√¨nh xong c√°c b·∫°n c√≥ th·ªÉ xem lu√¥n t·∫°i ƒë√¢y (xem xong nh·ªõ Star ƒë·ªÉ ·ªßng h·ªô t√°c gi·∫£): https://github.com/robinhuy/webpack-static-pages-template.\nGi·ªù ch√∫ng ta s·∫Ω th·ª≠ c·∫•u h√¨nh t·ª´ ƒë·∫ßu ƒë·ªÉ hi·ªÉu ƒë∆∞·ª£c c∆° b·∫£n c√°ch Webpack ho·∫°t ƒë·ªông v√† c√≥ th·ªÉ t√πy bi·∫øn theo t·ª´ng tr∆∞·ªùng h·ª£p c·ª• th·ªÉ.\n1. Kh·ªüi t·∫°o project Kh·ªüi t·∫°o project v·ªõi l·ªánh npm init v√† nh·∫≠p v√†o c√°c th√¥ng s·ªë nh∆∞: T√™n project, author, ‚Ä¶\nC√†i webpack v√† webpack-cli v·ªõi m√¥i tr∆∞·ªùng dev:\n1 npm install webpack webpack-cli --save-dev ho·∫∑c d√πng yarn:\n1 yarn add webpack webpack-cli --dev Sau khi c√†i xong ch√∫ng ta s·∫Ω th·∫•y c√≥ file package.json ch·ª©a c√°c th√¥ng tin v·ªÅ project v·ª´a t·∫°o.\nS·ª≠a l·∫°i file package.json, b·ªè ph·∫ßn main ƒëi v√† th√™m option private v·ªõi gi√° tr·ªã l√† true. C√°i n√†y ƒë·ªÉ tr√°nh l·ªói v·ªÅ sau khi build production.\n2. Bundle Code Th·ª≠ nghi·ªám ch·ª©c nƒÉng ƒë·∫ßu ti√™n c·ªßa Webpack ƒë√≥ l√† Bundle code, cho ph√©p ch√∫ng ta g·ªôp c√°c file js l·∫°i th√†nh 1 file (bundle) v√† inject v√†o trong m·ªôt file HTML.\nƒê·∫ßu ti√™n t·∫°o th∆∞ m·ª•c src ƒë·ªÉ ch·ª©a source code, trong th∆∞ m·ª•c src t·∫°o 1 file l√† index.js v·ªõi n·ªôi dung t√πy √Ω. V√≠ d·ª• m√¨nh t·∫°o file index.js ch·ªâ v·ªõi 1 d√≤ng console.log(‚Äòindex.js‚Äô):\nR·ªìi gi·ªù ch·∫°y l·ªánh sau ƒë·ªÉ bundle code (s·ª≠ d·ª•ng webpack c√†i trong project):\n1 npx webpack Sau khi ch·∫°y xong l·ªánh tr√™n th√†nh c√¥ng, s·∫Ω c√≥ 1 th∆∞ m·ª•c t·ª± ƒë·ªông t·∫°o ra l√† dist v√† b√™n trong c√≥ 1 file l√† main.js. Xem th·ª≠ n·ªôi dung th√¨ th·∫•y gi·ªëng h·ªát file index.js m√† ch√∫ng ta v·ª´a t·∫°o.\nNh∆∞ v·∫≠y l√† ch√∫ng ta v·ª´a bundle file index.js th√†nh main.js. Nh∆∞ng file index.js ƒë∆°n gi·∫£n qu√° ch∆∞a th·∫•y c√≥ g√¨. M√¨nh s·∫Ω s·ª≠a l·∫°i cho n√≥ ph·ª©c t·∫°p h∆°n m·ªôt ch√∫t b·∫±ng c√°ch nh√∫ng jQuery v√†o ƒë·ªÉ s·ª≠a DOM. V·ªõi c√°c static website th√¨ m√¨nh th·∫•y d√πng jQuery v·∫´n ·ªïn, kh√¥ng c·∫ßn thi·∫øt ph·∫£i ch·∫°y theo c√°c trending framework l√†m g√¨.\nƒê·ªÉ s·ª≠ d·ª•ng jQuery ch√∫ng ta c√≥ th·ªÉ ch√®n link CDN ho·∫∑c v√†o trang ch·ªß ƒë·ªÉ down file js v·ªÅ r·ªìi nh√∫ng v√†o file HTML. Tuy nhi√™n khi d√πng webpack ch√∫ng ta c√≥ th·ªÉ c√†i jQuery qua npm v√† import v√†o file js kh√°c ƒë·ªÉ s·ª≠ d·ª•ng.\nC√†i jQuery:\n1 npm install jquery ho·∫∑c\n1 yarn add jquery Sau khi c√†i xong, jQuery s·∫Ω ƒë∆∞·ª£c t·∫£i v√†o trong th∆∞ m·ª•c node_modules v√† ƒë∆∞·ª£c khai b√°o trong m·ª•c dependencies c·ªßa file package.json.\nS·ª≠a l·∫°i file index.js nh∆∞ sau:\n1 2 3 import $ from \"jquery\"; $(\"body\").html(\"Hello Webpack\"); Gi·ªù ƒë·ªÉ cho d·ªÖ test, c√°c b·∫°n t·∫°o th√™m cho m√¨nh 1 file index.html ·ªü trong th∆∞ m·ª•c dist, sau ƒë√≥ nh√∫ng file main.js v√†o trong file index.html\nR·ªìi ch·∫°y l·∫°i l·ªánh build: npx webpack.\nSau khi build th√†nh c√¥ng th√¨ b·∫≠t file HTML l√™n c√°c b·∫°n s·∫Ω th·∫•y n√≥ hi·ªÉn th·ªã ra m√†n h√¨nh d√≤ng ch·ªØ ‚ÄúHello Webpack‚Äù. Nh∆∞ v·∫≠y l√† ch√∫ng ta ƒë√£ bundle jQuery + index.js th√†nh file main.js v√† nh√∫ng v√†o file index.html. V√† n·∫øu b·∫°n b·∫≠t file main.js l√™n xem th√¨ s·∫Ω th·∫•y l√† n√≥ ƒë√£ ƒë∆∞·ª£c minify + obfuscated.\nC√°c b·∫°n c√≥ th·ªÉ th·ª≠ vi·∫øt th√™m function, import code t·ª´ nhi·ªÅu file kh√°c nhau v√† bundle l·∫°i th√†nh m·ªôt file nh∆∞ tr√™n.\n3. S·ª≠ d·ª•ng file c·∫•u h√¨nh ·ªû v√≠ d·ª• tr√™n ch√∫ng ta ch·∫°y webpack v·ªõi c·∫•u h√¨nh m·∫∑c ƒë·ªãnh. ƒê·ªÉ c√≥ th·ªÉ c·∫•u h√¨nh ƒë∆∞·ª£c nhi·ªÅu h∆°n, t√πy ch·ªânh d·ªÖ h∆°n th√¨ ch√∫ng ta t·∫°o th√™m 1 file c·∫•u h√¨nh v√† ch·∫°y webpack theo c·∫•u h√¨nh c·ªßa file ƒë√≥.\n·ªû th∆∞ m·ª•c g·ªëc t·∫°o 1 file l√† webpack.config.js v·ªõi n·ªôi dung nh∆∞ sau:\n1 2 3 4 5 6 7 8 9 const path = require(\"path\"); module.exports = { entry: \"./src/index.js\", output: { filename: \"main.js\", path: path.resolve(__dirname, \"dist\"), }, }; ƒê√¢y ch√≠nh l√† c·∫•u h√¨nh m·∫∑c ƒë·ªãnh, ch·∫°y th·ª≠ v·ªõi l·ªánh:\n1 npx webpack --config webpack.config.js b·∫°n s·∫Ω th·∫•y k·∫øt qu·∫£ y h·ªát nh∆∞ c≈©.\nB√¢y gi·ªù th·ª≠ s·ª≠a file config, v√≠ d·ª• s·ª≠a ph·∫ßn output \u003e filename th√†nh bundle.js,x√≥a h·∫øt file .js trong th∆∞ m·ª•c dist ƒëi v√† build l·∫°i, b·∫°n s·∫Ω th·∫•y sau khi build th√¨ file bundle c·ªßa ch√∫ng ta ƒë√£ ƒë·ªïi th√†nh bundle.js nh∆∞ trong file c·∫•u h√¨nh.\nFile c·∫•u h√¨nh c·ªßa webpack ch·ªâ ƒë∆°n gi·∫£n l√† export ra m·ªôt object c√≥ ch·ª©a c√°c options m√† webpack cung c·∫•p v√† gi√° tr·ªã do ch√∫ng ta thi·∫øt l·∫≠p, options n√†o kh√¥ng khai b√°o th√¨ webpack s·∫Ω s·ª≠ d·ª•ng gi√° tr·ªã m·∫∑c ƒë·ªãnh. V√≠ d·ª• m·ªôt file c·∫•u h√¨nh:\n4. S·ª≠ d·ª•ng Plugin S·ª≠ d·ª•ng plugin ƒë·ªÉ b·ªï sung th√™m t√≠nh nƒÉng mong mu·ªën, c√≥ th·ªÉ d√πng nh·ªØng plugin c√≥ s·∫µn ho·∫∑c t·ª± vi·∫øt. V√≠ d·ª• m·ªôt s·ªë Plugin hay d√πng: HtmlWebpackPlugin, MiniCssExtractPlugin, ImageMinimizerWebpackPlugin, ProvidePlugin.\nV·ªõi nh·ªØng plugin c√≥ s·∫µn tr√™n npm th√¨ ƒë·∫ßu ti√™n ch√∫ng ta c·∫ßn c√†i th∆∞ vi·ªán tr∆∞·ªõc:\n1 npm install html-webpack-plugin --save-dev ho·∫∑c\n1 yarn add html-webpack-plugin --dev Sau khi c√†i xong th√¨ khai b√°o plugin s·ª≠ d·ª•ng ·ªü file config v·ªõi options plugins, gi√° tr·ªã c·ªßa n√≥ l√† 1 m·∫£ng c√°c plugin. V√≠ d·ª• c√†i plugin html-webpack-plugin ƒë·ªÉ cho ph√©p t·∫°o file html m·∫´u v√† t√πy ch·ªânh inject script theo c√°ch m√¨nh mu·ªën.\n1 2 3 4 5 6 7 8 9 10 11 12 const HtmlWebpackPlugin = require(\"html-webpack-plugin\"); module.exports = { entry: \"index.js\", output: { path: `${__dirname}/dist`, clean: true, }, plugins: [new HtmlWebpackPlugin()], }; B√¢y gi·ªù thay v√¨ t·∫°o s·∫µn file html ·ªü trong th∆∞ m·ª•c dist, th√¨ ch√∫ng ta ch·ªâ c·∫ßn ch·∫°y l·ªánh build, webpack s·∫Ω t·ª± t·∫°o ra 1 file html v√† nh√∫ng file bundle v√†o lu√¥n. Ch√∫ √Ω option output clean: true l√† ƒë·ªÉ t·ª± ƒë·ªông x√≥a h·∫øt c√°c file c≈© trong th∆∞ m·ª•c dist tr∆∞·ªõc khi build.\n5. Cache Busting Th√¥ng th∆∞·ªùng tr√¨nh duy·ªát s·∫Ω t·ª± ƒë·ªông cache c√°c file tƒ©nh nh∆∞ CSS, JS ƒë·ªÉ tƒÉng performance (tr·ª´ tr∆∞·ªùng h·ª£p ph√≠a server c·∫•u h√¨nh kh√¥ng cho ph√©p cache file). Th·ªânh tho·∫£ng b·∫°n s·∫Ω g·∫∑p tr∆∞·ªùng h·ª£p s·ª≠a file CSS nh∆∞ng ng∆∞·ªùi d√πng kh√¥ng th·∫•y c√≥ g√¨ thay ƒë·ªïi. Mu·ªën √°p d·ª•ng style m·ªõi th√¨ ph·∫£i t·ª± clear cache tr√™n tr√¨nh duy·ªát (√≠t ng∆∞·ªùi d√πng bi·∫øt v√† t·ª± l√†m vi·ªác n√†y).\nV·∫≠y ƒë·ªÉ t·ªëi ∆∞u performance, v·∫´n cho ph√©p cache file v·ªõi th·ªùi gian d√†i, th√¨ ch√∫ng ta √°p d·ª•ng cache busting. C√≥ th·ªÉ l√† d√πng query strings ho·∫∑c ƒë·ªïi t√™n file ƒë·ªÉ browser nh·∫≠n bi·∫øt l√† c√≥ thay ƒë·ªïi v√† t·∫£i file m·ªõi v·ªÅ. ƒê·ªÉ ƒë·∫£m b·∫£o ch√≠nh x√°c th√¨ m√¨nh ch·ªçn c√°ch ƒë·ªïi t√™n file, m·ªói l·∫ßn thay ƒë·ªïi code th√¨ ch√∫ng ta l·∫°i ƒë·ªïi t√™n file ƒëi ƒë·ªÉ tr√¨nh duy·ªát t·ª± t·∫£i l·∫°i.\nThay v√¨ l√†m th·ªß c√¥ng th√¨ ch√∫ng ta s·∫Ω c·∫•u h√¨nh trong webpack ƒë·ªÉ webpack t·ª± ƒë·ªông build file v·ªõi t√™n m·ªõi v√† t·ª± ƒë·ªông nh√∫ng v√†o file html. K·∫øt h·ª£p option entry + module v√† plugin HtmlWebpackPlugin + MiniCssExtractPlugin, ch√∫ng ta c√≥ th·ªÉ bundle ra c√°c file JS, CSS v·ªõi t√™n theo d·∫°ng hash ho·∫∑c contenthash r·ªìi t·ª± ƒë·ªông nh√∫ng v√†o file html.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 const HtmlWebpackPlugin = require(\"html-webpack-plugin\"); const MiniCssExtractPlugin = require(\"mini-css-extract-plugin\"); module.exports = { entry: { index: { import: \"./src/index.js\", filename: \"index.[contenthash].js\", }, }, output: { path: `${__dirname}/dist`, clean: true, }, plugins: [ new HtmlWebpackPlugin(), new MiniCssExtractPlugin({ filename: \"[name].[contenthash].css\", }), ], module: { rules: [ { test: /.s?css$/, use: [MiniCssExtractPlugin.loader, \"css-loader\"], }, ], }, }; Ch√∫ √Ω ·ªü tr√™n m√¨nh c√≥ s·ª≠ d·ª•ng th√™m th∆∞ vi·ªán css-loader ƒë·ªÉ cho ph√©p import file CSS.\nTest th·ª≠ b·∫±ng c√°ch t·∫°o th√™m 1 file css trong th∆∞ m·ª•c src, v√≠ d·ª• style.css:\n1 2 3 h1 { color: red; } Ti·∫øp ƒë√≥ import v√†o file index.js:\n1 2 3 4 5 import \"./style.css\"; import $ from \"jquery\"; $(\"body\").prepend(\"Hello Webpack\"); Ch·∫°y l·∫°i l·ªánh build v√† k·∫øt qu·∫£ s·∫Ω nh∆∞ n√†y:\n6. Multiple pages T∆∞∆°ng t·ª±, th√™m 1 ch√∫t c·∫•u h√¨nh ·ªü entry v√† HtmlWebpackPlugin, ch√∫ng ta s·∫Ω c√≥ th·ªÉ code nhi·ªÅu file HTML (multiple pages), v√† cho ph√©p inject c√°c script kh√°c nhau v√†o t·ª´ng file. V√≠ d·ª•:\nC·∫•u h√¨nh multiple entry cho 2 trang l√† index v√† about:\n1 2 3 4 5 6 7 8 9 10 entry: { index: { import: \"./src/js/index.js\", filename: \"js/index.[contenthash].js\", }, about: { import: \"./src/js/about.js\", filename: \"js/about.[contenthash].js\", }, }, C·∫•u h√¨nh plugin HtmlWebpackPlugin ƒë·ªÉ cho ph√©p s·ª≠ d·ª•ng file html s·∫µn l√†m template thay v√¨ t·ª± sinh ra file html:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 plugins: [ new HtmlWebpackPlugin({ template: \"./src/index.html\", inject: \"body\", filename: \"index.html\", }), new HtmlWebpackPlugin({ template: \"./src/about.html\", inject: \"body\", filename: \"about.html\", }), new MiniCssExtractPlugin({ filename: \"css/[name].[contenthash].css\", }), ], T·ª± build l·∫°i ƒë·ªÉ xem k·∫øt qu·∫£!\n7. C·∫•u h√¨nh theo m√¥i tr∆∞·ªùng ·ªû tr√™n ch√∫ng ta ƒë√£ c·∫•u h√¨nh ƒë∆∞·ª£c t∆∞∆°ng ƒë·ªëi ƒë·∫ßy ƒë·ªß c√°c ch·ª©c nƒÉng. Nh∆∞ng n·∫øu m·ªói l·∫ßn code l·∫°i ph·∫£i build l·∫°i code ƒë·ªÉ xem k·∫øt qu·∫£ th√¨ r·∫•t m·∫•t c√¥ng, v√† khi debug c≈©ng kh√≥ v√¨ code ƒë√£ ƒë∆∞·ª£c minify + obfuscate. V√¨ v·∫≠y ch√∫ng ta s·∫Ω b·ªï sung th√™m c·∫•u h√¨nh cho m√¥i tr∆∞·ªùng dev, v√† b·ªï sung l·ªánh ch·∫°y cho 2 m√¥i tr∆∞·ªùng ri√™ng bi·ªát.\nThay v√¨ d√πng chung 1 file config th√¨ b√¢y gi·ªù m√¨nh s·∫Ω t·∫°o ra 3 file:\nwebpack.common.js: Ch·ª©a c·∫•u h√¨nh chung cho c·∫£ 2 m√¥i tr∆∞·ªùng. webpack.dev.js: Ch·ª©a c·∫•u h√¨nh cho m√¥i tr∆∞·ªùng development. webpack.prod.js: Ch·ª©a c·∫•u h√¨nh cho m√¥i tr∆∞·ªùng production. File webpack.common.js gi·ªØ nguy√™n, file webpack.dev.js v√† webpack.prod.js th√¨ s·ª≠ d·ª•ng th∆∞ vi·ªán webpack-merge ƒë·ªÉ copy c·∫•u h√¨nh t·ª´ file common sang v√† b·ªï sung th√™m 1 s·ªë c·∫•u h√¨nh ri√™ng.\nV√≠ d·ª• file webpack.prod.js:\n1 2 3 4 5 6 const { merge } = require(\"webpack-merge\"); const common = require(\"./webpack.common.js\"); module.exports = merge(common, { mode: \"production\", }); File webpack.dev.js:\n1 2 3 4 5 6 7 8 9 10 11 12 13 const { merge } = require(\"webpack-merge\"); const common = require(\"./webpack.common.js\"); module.exports = merge(common, { mode: \"development\", devtool: \"inline-source-map\", devServer: { contentBase: \"./dist\", hot: true, }, }); Khi ch·∫°y ·ªü m√¥i tr∆∞·ªùng dev th√¨ d√πng l·ªánh:\n1 npx webpack¬†serve¬†--open¬†--config¬†webpack.dev.js Khi ch·∫°y ·ªü m√¥i tr∆∞·ªùng production th√¨ d√πng l·ªánh:\n1 npx webpack¬†--config¬†webpack.prod.js ƒê·ªÉ cho nhanh th√¨ ch√∫ng ta c√≥ th·ªÉ d√πng npm scripts b·∫±ng c√°ch s·ª≠a file package.json m·ª•c scripts:\n1 2 3 4 \"scripts\":¬†{ \"start\":¬†\"webpack¬†serve¬†--open¬†--config¬†webpack.dev.js\", \"build\":¬†\"webpack¬†--config¬†webpack.prod.js\" }, Sau ƒë√≥ khi c·∫ßn dev th√¨ ch·∫°y l·ªánh: npm start ho·∫∑c yarn start, c√≤n khi build production th√¨ ch·∫°y l·ªánh: npm run build ho·∫∑c yarn build.\nV·∫≠y l√† xong, ch√∫ng ta ƒë√£ setup xong m·ªôt project static web s·ª≠ d·ª•ng Webpack ƒë·ªÉ bundle v√† t·ªëi ∆∞u cho production. C√°c b·∫°n c√≥ th·ªÉ t·ª± t√¨m hi·ªÉu th√™m tr√™n trang ch·ªß c·ªßa webpack ƒë·ªÉ c·∫•u h√¨nh chi ti·∫øt h∆°n cho t·ª´ng project.\nTham kh·∫£o c·∫•u h√¨nh v√† c·∫•u tr√∫c th∆∞ m·ª•c demo ƒë·∫ßy ƒë·ªß h∆°n t·∫°i ƒë√¢y: https://github.com/robinhuy/webpack-static-pages-template.\n","wordCount":"2045","inLanguage":"en","datePublished":"2021-06-19T00:00:00Z","dateModified":"2021-06-19T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://huydq.dev/blog/toi-uu-static-page-voi-webpack/"},"publisher":{"@type":"Organization","name":"HuyDQ's Blog","logo":{"@type":"ImageObject","url":"https://huydq.dev/icons/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://huydq.dev/ accesskey=h title="huydq.dev (Alt + H)">huydq.dev</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://huydq.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://huydq.dev/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://huydq.dev/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://huydq.dev/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>T·ªëi ∆∞u static website v·ªõi Webpack</h1><div class=post-meta><span title='2021-06-19 00:00:00 +0000 UTC'>19/06/2021</span>&nbsp;¬∑&nbsp;10 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#1-kh·ªüi-t·∫°o-project>1. Kh·ªüi t·∫°o project</a></li><li><a href=#2-bundle-code>2. Bundle Code</a></li><li><a href=#3-s·ª≠-d·ª•ng-file-c·∫•u-h√¨nh>3. S·ª≠ d·ª•ng file c·∫•u h√¨nh</a></li><li><a href=#4-s·ª≠-d·ª•ng-plugin>4. S·ª≠ d·ª•ng Plugin</a></li><li><a href=#5-cache-busting>5. Cache Busting</a></li><li><a href=#6-multiple-pages>6. Multiple pages</a></li><li><a href=#7-c·∫•u-h√¨nh-theo-m√¥i-tr∆∞·ªùng>7. C·∫•u h√¨nh theo m√¥i tr∆∞·ªùng</a></li></ul></nav></div></details></div><div class=post-content><p>N·∫øu b·∫°n l√† m·ªôt Web Frontend Developer th√¨ ch·∫Øc s·∫Ω kh√¥ng xa l·∫° g√¨ v·ªõi <a href=https://webpack.js.org/>Webpack</a>, m·ªôt c√¥ng c·ª• bundle code m·∫°nh m·∫Ω. Webpack th∆∞·ªùng ƒë∆∞·ª£c t√≠ch h·ª£p s·∫µn trong c√°c th∆∞ vi·ªán nh∆∞ React, Angular, Vue, ‚Ä¶ v√† c√≥ nhi·ªÅu ng∆∞·ªùi th·∫≠m ch√≠ c√≤n kh√¥ng bi·∫øt ƒë·∫øn s·ª± t·ªìn t·∫°i c≈©ng nh∆∞ t√°c d·ª•ng c·ªßa n√≥ üòÖ</p><p>B√†i vi·∫øt n√†y m√¨nh s·∫Ω h∆∞·ªõng d·∫´n c√°c b·∫°n c√°ch t·ªëi ∆∞u m·ªôt static website (web tƒ©nh ch·ªâ g·ªìm HTML CSS JS) b·∫±ng Webpack. Ch√∫ √Ω static web n√†y thu·ªôc d·∫°ng multiple pages ch·ª© kh√¥ng ph·∫£i single page, v√† c√≥ th·ªÉ √°p d·ª•ng cho c√°c website ƒë·ªông c√≥ ki·∫øn tr√∫c d·∫°ng Monolithic (d√πng view template engine ƒë·ªÉ render).</p><p>V√≠ d·ª• c·∫•u tr√∫c th∆∞ m·ª•c m·ªôt static website th∆∞·ªùng c√≥ d·∫°ng nh∆∞ sau:</p><p><img loading=lazy src=/images/static-web-structure.png alt="C·∫•u tr√∫c th∆∞ m·ª•c static website"></p><p>Sau khi c·∫Øt HTML CSS t·ª´ b·∫£n thi·∫øt k·∫ø xong, tr∆∞·ªõc khi ƒë·∫©y code l√™n production, ch√∫ng ta c·∫ßn th√™m m·ªôt b∆∞·ªõc t·ªëi ∆∞u nh∆∞: Minify (obfuscate) code, n√©n ·∫£nh, ƒë√°nh version file CSS, JS ƒë·ªÉ revalidate cache, ‚Ä¶</p><p>Ch√∫ng ta c√≥ th·ªÉ d√πng c√°c tool nh∆∞ <a href=https://gruntjs.com/>Grunt</a>, <a href=https://gulpjs.com/>Gulp</a>, ‚Ä¶ C√≤n trong b√†i n√†y m√¨nh s·∫Ω d√πng Webpack v·ªõi nh·ªØng t√≠nh nƒÉng ∆∞u vi·ªát h∆°n, gi√∫p l·∫≠p tr√¨nh vi√™n c√≥ th·ªÉ <em>l∆∞·ªùi h∆°n</em>.</p><p>Code tham kh·∫£o sau khi c·∫•u h√¨nh xong c√°c b·∫°n c√≥ th·ªÉ xem lu√¥n t·∫°i ƒë√¢y (xem xong nh·ªõ Star ƒë·ªÉ ·ªßng h·ªô t√°c gi·∫£): <a href=https://github.com/robinhuy/webpack-static-pages-template>https://github.com/robinhuy/webpack-static-pages-template.</a></p><p>Gi·ªù ch√∫ng ta s·∫Ω th·ª≠ c·∫•u h√¨nh t·ª´ ƒë·∫ßu ƒë·ªÉ hi·ªÉu ƒë∆∞·ª£c c∆° b·∫£n c√°ch Webpack ho·∫°t ƒë·ªông v√† c√≥ th·ªÉ t√πy bi·∫øn theo t·ª´ng tr∆∞·ªùng h·ª£p c·ª• th·ªÉ.</p><h2 id=1-kh·ªüi-t·∫°o-project>1. Kh·ªüi t·∫°o project<a hidden class=anchor aria-hidden=true href=#1-kh·ªüi-t·∫°o-project>#</a></h2><p>Kh·ªüi t·∫°o project v·ªõi l·ªánh <strong>npm init</strong> v√† nh·∫≠p v√†o c√°c th√¥ng s·ªë nh∆∞: T√™n project, author, ‚Ä¶</p><p>C√†i <strong>webpack</strong> v√† <strong>webpack-cli</strong> v·ªõi m√¥i tr∆∞·ªùng dev:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install webpack webpack-cli --save-dev
</span></span></code></pre></td></tr></table></div></div><p>ho·∫∑c d√πng <a href=https://yarnpkg.com/>yarn</a>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add webpack webpack-cli --dev
</span></span></code></pre></td></tr></table></div></div><p>Sau khi c√†i xong ch√∫ng ta s·∫Ω th·∫•y c√≥ file <strong>package.json</strong> ch·ª©a c√°c th√¥ng tin v·ªÅ project v·ª´a t·∫°o.</p><p>S·ª≠a l·∫°i file <strong>package.json</strong>, b·ªè ph·∫ßn <strong>main</strong> ƒëi v√† th√™m option <strong>private</strong> v·ªõi gi√° tr·ªã l√† <strong>true</strong>. C√°i n√†y ƒë·ªÉ tr√°nh l·ªói v·ªÅ sau khi build production.</p><p><img loading=lazy src=/images/package-json.png alt="S·ª≠a file package.json"></p><h2 id=2-bundle-code>2. Bundle Code<a hidden class=anchor aria-hidden=true href=#2-bundle-code>#</a></h2><p>Th·ª≠ nghi·ªám ch·ª©c nƒÉng ƒë·∫ßu ti√™n c·ªßa Webpack ƒë√≥ l√† Bundle code, cho ph√©p ch√∫ng ta g·ªôp c√°c file js l·∫°i th√†nh 1 file (bundle) v√† inject v√†o trong m·ªôt file HTML.</p><p>ƒê·∫ßu ti√™n t·∫°o th∆∞ m·ª•c <strong>src</strong> ƒë·ªÉ ch·ª©a source code, trong th∆∞ m·ª•c src t·∫°o 1 file l√† <strong>index.js</strong> v·ªõi n·ªôi dung t√πy √Ω. V√≠ d·ª• m√¨nh t·∫°o file <strong>index.js</strong> ch·ªâ v·ªõi 1 d√≤ng <em>console.log(&lsquo;index.js&rsquo;):</em></p><p><img loading=lazy src=/images/webpack-demo-1.png alt="File index.js"></p><p>R·ªìi gi·ªù ch·∫°y l·ªánh sau ƒë·ªÉ bundle code (s·ª≠ d·ª•ng webpack c√†i trong project):</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx webpack
</span></span></code></pre></td></tr></table></div></div><p>Sau khi ch·∫°y xong l·ªánh tr√™n th√†nh c√¥ng, s·∫Ω c√≥ 1 th∆∞ m·ª•c t·ª± ƒë·ªông t·∫°o ra l√† <strong>dist</strong> v√† b√™n trong c√≥ 1 file l√† <strong>main.js</strong>. Xem th·ª≠ n·ªôi dung th√¨ th·∫•y gi·ªëng h·ªát file index.js m√† ch√∫ng ta v·ª´a t·∫°o.</p><p>Nh∆∞ v·∫≠y l√† ch√∫ng ta v·ª´a bundle file <code>index.js</code> th√†nh <code>main.js</code>. Nh∆∞ng file <code>index.js</code> ƒë∆°n gi·∫£n qu√° ch∆∞a th·∫•y c√≥ g√¨. M√¨nh s·∫Ω s·ª≠a l·∫°i cho n√≥ ph·ª©c t·∫°p h∆°n m·ªôt ch√∫t b·∫±ng c√°ch nh√∫ng jQuery v√†o ƒë·ªÉ s·ª≠a DOM. V·ªõi c√°c static website th√¨ m√¨nh th·∫•y d√πng jQuery v·∫´n ·ªïn, kh√¥ng c·∫ßn thi·∫øt ph·∫£i ch·∫°y theo c√°c trending framework l√†m g√¨.</p><p><img loading=lazy src=/images/jquery.jpg alt=jQuery></p><p>ƒê·ªÉ s·ª≠ d·ª•ng jQuery ch√∫ng ta c√≥ th·ªÉ ch√®n link CDN ho·∫∑c v√†o trang ch·ªß ƒë·ªÉ down file js v·ªÅ r·ªìi nh√∫ng v√†o file HTML. Tuy nhi√™n khi d√πng webpack ch√∫ng ta c√≥ th·ªÉ c√†i jQuery qua npm v√† import v√†o file js kh√°c ƒë·ªÉ s·ª≠ d·ª•ng.</p><p>C√†i jQuery:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install jquery
</span></span></code></pre></td></tr></table></div></div><p>ho·∫∑c</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add jquery
</span></span></code></pre></td></tr></table></div></div><p>Sau khi c√†i xong, jQuery s·∫Ω ƒë∆∞·ª£c t·∫£i v√†o trong th∆∞ m·ª•c <strong>node_modules</strong> v√† ƒë∆∞·ª£c khai b√°o trong m·ª•c <em>dependencies</em> c·ªßa file <strong>package.json</strong>.</p><p>S·ª≠a l·∫°i file <strong>index.js</strong> nh∆∞ sau:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>$</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;jquery&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;body&#34;</span>).<span style=color:#a6e22e>html</span>(<span style=color:#e6db74>&#34;&lt;h1&gt;Hello Webpack&lt;/h2&gt;&#34;</span>);
</span></span></code></pre></td></tr></table></div></div><p>Gi·ªù ƒë·ªÉ cho d·ªÖ test, c√°c b·∫°n t·∫°o th√™m cho m√¨nh 1 file <strong>index.html</strong> ·ªü trong th∆∞ m·ª•c <strong>dist</strong>, sau ƒë√≥ nh√∫ng file <strong>main.js</strong> v√†o trong file <strong>index.html</strong></p><p><img loading=lazy src=/images/webpack-demo-2.png alt="File main.js"></p><p>R·ªìi ch·∫°y l·∫°i l·ªánh build: <strong>npx webpack.</strong></p><p>Sau khi build th√†nh c√¥ng th√¨ b·∫≠t file HTML l√™n c√°c b·∫°n s·∫Ω th·∫•y n√≥ hi·ªÉn th·ªã ra m√†n h√¨nh d√≤ng ch·ªØ ‚ÄúHello Webpack‚Äù. Nh∆∞ v·∫≠y l√† ch√∫ng ta ƒë√£ bundle <strong>jQuery</strong> + <strong>index.js</strong> th√†nh file <strong>main.js</strong> v√† nh√∫ng v√†o file <strong>index.html</strong>. V√† n·∫øu b·∫°n b·∫≠t file <strong>main.js</strong> l√™n xem th√¨ s·∫Ω th·∫•y l√† n√≥ ƒë√£ ƒë∆∞·ª£c minify + obfuscated.</p><p>C√°c b·∫°n c√≥ th·ªÉ th·ª≠ vi·∫øt th√™m function, import code t·ª´ nhi·ªÅu file kh√°c nhau v√† bundle l·∫°i th√†nh m·ªôt file nh∆∞ tr√™n.</p><h2 id=3-s·ª≠-d·ª•ng-file-c·∫•u-h√¨nh>3. S·ª≠ d·ª•ng file c·∫•u h√¨nh<a hidden class=anchor aria-hidden=true href=#3-s·ª≠-d·ª•ng-file-c·∫•u-h√¨nh>#</a></h2><p>·ªû v√≠ d·ª• tr√™n ch√∫ng ta ch·∫°y webpack v·ªõi c·∫•u h√¨nh m·∫∑c ƒë·ªãnh. ƒê·ªÉ c√≥ th·ªÉ c·∫•u h√¨nh ƒë∆∞·ª£c nhi·ªÅu h∆°n, t√πy ch·ªânh d·ªÖ h∆°n th√¨ ch√∫ng ta t·∫°o th√™m 1 file c·∫•u h√¨nh v√† ch·∫°y webpack theo c·∫•u h√¨nh c·ªßa file ƒë√≥.</p><p>·ªû th∆∞ m·ª•c g·ªëc t·∫°o 1 file l√† <strong>webpack.config.js</strong> v·ªõi n·ªôi dung nh∆∞ sau:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;path&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/index.js&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;main.js&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#34;dist&#34;</span>),
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><p>ƒê√¢y ch√≠nh l√† c·∫•u h√¨nh m·∫∑c ƒë·ªãnh, ch·∫°y th·ª≠ v·ªõi l·ªánh:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx webpack --config webpack.config.js
</span></span></code></pre></td></tr></table></div></div><p>b·∫°n s·∫Ω th·∫•y k·∫øt qu·∫£ y h·ªát nh∆∞ c≈©.</p><p>B√¢y gi·ªù th·ª≠ s·ª≠a file config, v√≠ d·ª• s·ª≠a ph·∫ßn <em>output</em> > <em>filename</em> th√†nh <strong>bundle.js</strong>,x√≥a h·∫øt file <em>.js</em> trong th∆∞ m·ª•c <strong>dist</strong> ƒëi v√† build l·∫°i, b·∫°n s·∫Ω th·∫•y sau khi build th√¨ file bundle c·ªßa ch√∫ng ta ƒë√£ ƒë·ªïi th√†nh <strong>bundle.js</strong> nh∆∞ trong file c·∫•u h√¨nh.</p><p>File c·∫•u h√¨nh c·ªßa webpack ch·ªâ ƒë∆°n gi·∫£n l√† export ra m·ªôt object c√≥ ch·ª©a c√°c options m√† webpack cung c·∫•p v√† gi√° tr·ªã do ch√∫ng ta thi·∫øt l·∫≠p, options n√†o kh√¥ng khai b√°o th√¨ webpack s·∫Ω s·ª≠ d·ª•ng gi√° tr·ªã m·∫∑c ƒë·ªãnh. V√≠ d·ª• m·ªôt file c·∫•u h√¨nh:</p><p><img loading=lazy src=/images/webpack-demo-3.png alt="Webpack configuration file"></p><h2 id=4-s·ª≠-d·ª•ng-plugin>4. S·ª≠ d·ª•ng Plugin<a hidden class=anchor aria-hidden=true href=#4-s·ª≠-d·ª•ng-plugin>#</a></h2><p>S·ª≠ d·ª•ng plugin ƒë·ªÉ b·ªï sung th√™m t√≠nh nƒÉng mong mu·ªën, c√≥ th·ªÉ d√πng nh·ªØng plugin c√≥ s·∫µn ho·∫∑c t·ª± vi·∫øt. V√≠ d·ª• m·ªôt s·ªë Plugin hay d√πng: <a href=https://webpack.js.org/plugins/html-webpack-plugin/>HtmlWebpackPlugin</a>, <a href=https://webpack.js.org/plugins/mini-css-extract-plugin/>MiniCssExtractPlugin</a>, <a href=https://webpack.js.org/plugins/image-minimizer-webpack-plugin/>ImageMinimizerWebpackPlugin</a>, <a href=https://webpack.js.org/plugins/provide-plugin/>ProvidePlugin</a>.</p><p>V·ªõi nh·ªØng plugin c√≥ s·∫µn tr√™n npm th√¨ ƒë·∫ßu ti√™n ch√∫ng ta c·∫ßn c√†i th∆∞ vi·ªán tr∆∞·ªõc:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install html-webpack-plugin --save-dev
</span></span></code></pre></td></tr></table></div></div><p>ho·∫∑c</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn add html-webpack-plugin --dev
</span></span></code></pre></td></tr></table></div></div><p>Sau khi c√†i xong th√¨ khai b√°o plugin s·ª≠ d·ª•ng ·ªü file config v·ªõi options <strong>plugins</strong>, gi√° tr·ªã c·ªßa n√≥ l√† 1 m·∫£ng c√°c plugin. V√≠ d·ª• c√†i plugin <a href=https://github.com/jantimon/html-webpack-plugin>html-webpack-plugin</a> ƒë·ªÉ cho ph√©p t·∫°o file html m·∫´u v√† t√πy ch·ªânh inject script theo c√°ch m√¨nh mu·ªën.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;html-webpack-plugin&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;index.js&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>__dirname</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/dist`</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span>()],
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><p>B√¢y gi·ªù thay v√¨ t·∫°o s·∫µn file html ·ªü trong th∆∞ m·ª•c <strong>dist</strong>, th√¨ ch√∫ng ta ch·ªâ c·∫ßn ch·∫°y l·ªánh build, webpack s·∫Ω t·ª± t·∫°o ra 1 file html v√† nh√∫ng file bundle v√†o lu√¥n. Ch√∫ √Ω option output <strong>clean: true</strong> l√† ƒë·ªÉ t·ª± ƒë·ªông x√≥a h·∫øt c√°c file c≈© trong th∆∞ m·ª•c dist tr∆∞·ªõc khi build.</p><h2 id=5-cache-busting>5. Cache Busting<a hidden class=anchor aria-hidden=true href=#5-cache-busting>#</a></h2><p>Th√¥ng th∆∞·ªùng tr√¨nh duy·ªát s·∫Ω t·ª± ƒë·ªông cache c√°c file tƒ©nh nh∆∞ CSS, JS ƒë·ªÉ tƒÉng performance (tr·ª´ tr∆∞·ªùng h·ª£p ph√≠a server c·∫•u h√¨nh kh√¥ng cho ph√©p cache file). Th·ªânh tho·∫£ng b·∫°n s·∫Ω g·∫∑p tr∆∞·ªùng h·ª£p s·ª≠a file CSS nh∆∞ng ng∆∞·ªùi d√πng kh√¥ng th·∫•y c√≥ g√¨ thay ƒë·ªïi. Mu·ªën √°p d·ª•ng style m·ªõi th√¨ ph·∫£i t·ª± clear cache tr√™n tr√¨nh duy·ªát (√≠t ng∆∞·ªùi d√πng bi·∫øt v√† t·ª± l√†m vi·ªác n√†y).</p><p>V·∫≠y ƒë·ªÉ t·ªëi ∆∞u performance, v·∫´n cho ph√©p cache file v·ªõi th·ªùi gian d√†i, th√¨ ch√∫ng ta √°p d·ª•ng cache busting. C√≥ th·ªÉ l√† d√πng query strings ho·∫∑c ƒë·ªïi t√™n file ƒë·ªÉ browser nh·∫≠n bi·∫øt l√† c√≥ thay ƒë·ªïi v√† t·∫£i file m·ªõi v·ªÅ. ƒê·ªÉ ƒë·∫£m b·∫£o ch√≠nh x√°c th√¨ m√¨nh ch·ªçn c√°ch ƒë·ªïi t√™n file, m·ªói l·∫ßn thay ƒë·ªïi code th√¨ ch√∫ng ta l·∫°i ƒë·ªïi t√™n file ƒëi ƒë·ªÉ tr√¨nh duy·ªát t·ª± t·∫£i l·∫°i.</p><p>Thay v√¨ l√†m th·ªß c√¥ng th√¨ ch√∫ng ta s·∫Ω c·∫•u h√¨nh trong webpack ƒë·ªÉ webpack t·ª± ƒë·ªông build file v·ªõi t√™n m·ªõi v√† t·ª± ƒë·ªông nh√∫ng v√†o file html. K·∫øt h·ª£p option <strong>entry</strong> + <strong>module</strong> v√† plugin <strong>HtmlWebpackPlugin</strong> + <strong>MiniCssExtractPlugin</strong>, ch√∫ng ta c√≥ th·ªÉ bundle ra c√°c file JS, CSS v·ªõi t√™n theo d·∫°ng <strong>hash</strong> ho·∫∑c <strong>contenthash</strong> r·ªìi t·ª± ƒë·ªông nh√∫ng v√†o file html.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;html-webpack-plugin&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>MiniCssExtractPlugin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;mini-css-extract-plugin&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>index</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>import</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/index.js&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;index.[contenthash].js&#34;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>__dirname</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/dist`</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span>(),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MiniCssExtractPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;[name].[contenthash].css&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>module</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rules</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/.s?css$/</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>use</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>MiniCssExtractPlugin</span>.<span style=color:#a6e22e>loader</span>, <span style=color:#e6db74>&#34;css-loader&#34;</span>],
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span></code></pre></td></tr></table></div></div><p>Ch√∫ √Ω ·ªü tr√™n m√¨nh c√≥ s·ª≠ d·ª•ng th√™m th∆∞ vi·ªán <a href=https://webpack.js.org/loaders/css-loader/>css-loader</a> ƒë·ªÉ cho ph√©p import file CSS.</p><p>Test th·ª≠ b·∫±ng c√°ch t·∫°o th√™m 1 file css trong th∆∞ m·ª•c <strong>src</strong>, v√≠ d·ª• <strong>style.css</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css><span style=display:flex><span><span style=color:#f92672>h1</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>color</span>: <span style=color:#66d9ef>red</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Ti·∫øp ƒë√≥ import v√†o file <strong>index.js</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;./style.css&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>$</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;jquery&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$</span>(<span style=color:#e6db74>&#34;body&#34;</span>).<span style=color:#a6e22e>prepend</span>(<span style=color:#e6db74>&#34;&lt;h1&gt;Hello Webpack&lt;/h2&gt;&#34;</span>);
</span></span></code></pre></td></tr></table></div></div><p>Ch·∫°y l·∫°i l·ªánh build v√† k·∫øt qu·∫£ s·∫Ω nh∆∞ n√†y:</p><p><img loading=lazy src=/images/webpack-demo-4.png alt="CSS JS Cache Busting"></p><h2 id=6-multiple-pages>6. Multiple pages<a hidden class=anchor aria-hidden=true href=#6-multiple-pages>#</a></h2><p>T∆∞∆°ng t·ª±, th√™m 1 ch√∫t c·∫•u h√¨nh ·ªü <strong>entry</strong> v√† <strong>HtmlWebpackPlugin</strong>, ch√∫ng ta s·∫Ω c√≥ th·ªÉ code nhi·ªÅu file HTML (multiple pages), v√† cho ph√©p inject c√°c script kh√°c nhau v√†o t·ª´ng file. V√≠ d·ª•:</p><p>C·∫•u h√¨nh multiple entry cho 2 trang l√† <strong>index</strong> v√† <strong>about</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>index</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>import</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/js/index.js&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;js/index.[contenthash].js&#34;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>about</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>import</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/js/about.js&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;js/about.[contenthash].js&#34;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>},
</span></span></code></pre></td></tr></table></div></div><p>C·∫•u h√¨nh plugin HtmlWebpackPlugin ƒë·ªÉ cho ph√©p s·ª≠ d·ª•ng file html s·∫µn l√†m template thay v√¨ t·ª± sinh ra file html:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/index.html&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>inject</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;body&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;index.html&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>HtmlWebpackPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>template</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./src/about.html&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>inject</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;body&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;about.html&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MiniCssExtractPlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;css/[name].[contenthash].css&#34;</span>,
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>],
</span></span></code></pre></td></tr></table></div></div><p>T·ª± build l·∫°i ƒë·ªÉ xem k·∫øt qu·∫£!</p><h2 id=7-c·∫•u-h√¨nh-theo-m√¥i-tr∆∞·ªùng>7. C·∫•u h√¨nh theo m√¥i tr∆∞·ªùng<a hidden class=anchor aria-hidden=true href=#7-c·∫•u-h√¨nh-theo-m√¥i-tr∆∞·ªùng>#</a></h2><p>·ªû tr√™n ch√∫ng ta ƒë√£ c·∫•u h√¨nh ƒë∆∞·ª£c t∆∞∆°ng ƒë·ªëi ƒë·∫ßy ƒë·ªß c√°c ch·ª©c nƒÉng. Nh∆∞ng n·∫øu m·ªói l·∫ßn code l·∫°i ph·∫£i build l·∫°i code ƒë·ªÉ xem k·∫øt qu·∫£ th√¨ r·∫•t m·∫•t c√¥ng, v√† khi debug c≈©ng kh√≥ v√¨ code ƒë√£ ƒë∆∞·ª£c minify + obfuscate. V√¨ v·∫≠y ch√∫ng ta s·∫Ω b·ªï sung th√™m c·∫•u h√¨nh cho m√¥i tr∆∞·ªùng dev, v√† b·ªï sung l·ªánh ch·∫°y cho 2 m√¥i tr∆∞·ªùng ri√™ng bi·ªát.</p><p>Thay v√¨ d√πng chung 1 file config th√¨ b√¢y gi·ªù m√¨nh s·∫Ω t·∫°o ra 3 file:</p><ul><li><strong>webpack.common.js</strong>: Ch·ª©a c·∫•u h√¨nh chung cho c·∫£ 2 m√¥i tr∆∞·ªùng.</li><li><strong>webpack.dev.js</strong>: Ch·ª©a c·∫•u h√¨nh cho m√¥i tr∆∞·ªùng development.</li><li><strong>webpack.prod.js</strong>: Ch·ª©a c·∫•u h√¨nh cho m√¥i tr∆∞·ªùng production.</li></ul><p>File <strong>webpack.common.js</strong> gi·ªØ nguy√™n, file <strong>webpack.dev.js</strong> v√† <strong>webpack.prod.js</strong> th√¨ s·ª≠ d·ª•ng th∆∞ vi·ªán <a href=https://www.npmjs.com/package/webpack-merge>webpack-merge</a> ƒë·ªÉ copy c·∫•u h√¨nh t·ª´ file common sang v√† b·ªï sung th√™m 1 s·ªë c·∫•u h√¨nh ri√™ng.</p><p>V√≠ d·ª• file <strong>webpack.prod.js</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>merge</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;webpack-merge&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>common</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;./webpack.common.js&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>merge</span>(<span style=color:#a6e22e>common</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;production&#34;</span>,
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><p>File <strong>webpack.dev.js</strong>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>merge</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;webpack-merge&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>common</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#34;./webpack.common.js&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>merge</span>(<span style=color:#a6e22e>common</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mode</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;development&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>devtool</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;inline-source-map&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>devServer</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>contentBase</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./dist&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>hot</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>});
</span></span></code></pre></td></tr></table></div></div><p>Khi ch·∫°y ·ªü m√¥i tr∆∞·ªùng dev th√¨ d√πng l·ªánh:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx webpack¬†serve¬†--open¬†--config¬†webpack.dev.js
</span></span></code></pre></td></tr></table></div></div><p>Khi ch·∫°y ·ªü m√¥i tr∆∞·ªùng production th√¨ d√πng l·ªánh:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npx webpack¬†--config¬†webpack.prod.js
</span></span></code></pre></td></tr></table></div></div><p>ƒê·ªÉ cho nhanh th√¨ ch√∫ng ta c√≥ th·ªÉ d√πng npm scripts b·∫±ng c√°ch s·ª≠a file <strong>package.json</strong> m·ª•c <em>scripts</em>:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#f92672>:</span>¬†{
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;start&#34;</span><span style=color:#f92672>:</span>¬†<span style=color:#e6db74>&#34;webpack¬†serve¬†--open¬†--config¬†webpack.dev.js&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;build&#34;</span><span style=color:#f92672>:</span>¬†<span style=color:#e6db74>&#34;webpack¬†--config¬†webpack.prod.js&#34;</span>
</span></span><span style=display:flex><span>},
</span></span></code></pre></td></tr></table></div></div><p>Sau ƒë√≥ khi c·∫ßn dev th√¨ ch·∫°y l·ªánh: <strong>npm start</strong> ho·∫∑c <strong>yarn start</strong>, c√≤n khi build production th√¨ ch·∫°y l·ªánh: <strong>npm run build</strong> ho·∫∑c <strong>yarn build</strong>.</p><p>V·∫≠y l√† xong, ch√∫ng ta ƒë√£ setup xong m·ªôt project static web s·ª≠ d·ª•ng Webpack ƒë·ªÉ bundle v√† t·ªëi ∆∞u cho production. C√°c b·∫°n c√≥ th·ªÉ t·ª± t√¨m hi·ªÉu th√™m tr√™n trang ch·ªß c·ªßa webpack ƒë·ªÉ c·∫•u h√¨nh chi ti·∫øt h∆°n cho t·ª´ng project.</p><p>Tham kh·∫£o c·∫•u h√¨nh v√† c·∫•u tr√∫c th∆∞ m·ª•c demo ƒë·∫ßy ƒë·ªß h∆°n t·∫°i ƒë√¢y: <a href=https://github.com/robinhuy/webpack-static-pages-template>https://github.com/robinhuy/webpack-static-pages-template</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://huydq.dev/tags/webpack/>Webpack</a></li></ul><nav class=paginav><a class=prev href=https://huydq.dev/blog/tai-su-dung-code-cho-nhieu-project-voi-git-submodules/><span class=title>¬´ Prev</span><br><span>T√°i s·ª≠ d·ª•ng code cho nhi·ªÅu project v·ªõi Git Submodules</span></a>
<a class=next href=https://huydq.dev/blog/cach-tao-web-tinh-voi-github/><span class=title>Next ¬ª</span><br><span>C√°c c√°ch t·∫°o web tƒ©nh v·ªõi Github</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share T·ªëi ∆∞u static website v·ªõi Webpack on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fhuydq.dev%2fblog%2ftoi-uu-static-page-voi-webpack%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share T·ªëi ∆∞u static website v·ªõi Webpack on twitter" href="https://twitter.com/intent/tweet/?text=T%e1%bb%91i%20%c6%b0u%20static%20website%20v%e1%bb%9bi%20Webpack&url=https%3a%2f%2fhuydq.dev%2fblog%2ftoi-uu-static-page-voi-webpack%2f&hashtags=Webpack"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a></div></footer><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//huydq-dev.disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>&copy; 2022 HuyDQ's Blog</span>
<span>&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;</span><div class=social-icons><a href=https://github.com/robinhuy><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=https://codepen.io/robinhuy><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/><line x1="12" y1="22" x2="12" y2="15.5"/><polyline points="22 8.5 12 15.5 2 8.5"/><polyline points="2 15.5 12 8.5 22 15.5"/><line x1="12" y1="2" x2="12" y2="8.5"/></svg></a><a href=https://stackoverflow.com/users/5229299/robin-huy><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.913 16.041v6.848h17.599v-6.848M7.16 18.696h8.925M7.65 13.937l8.675 1.8M9.214 9.124l8.058 3.758M12.086 4.65l6.849 5.66M15.774 1.111l5.313 7.162"/></svg></a></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>